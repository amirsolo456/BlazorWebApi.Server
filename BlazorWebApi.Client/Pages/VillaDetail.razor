@page "/VillaDetail/{ID:int}"
@inject HttpClient _httpclient
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
    .style2 {
    font-family: Tahoma;
    font-size: 16px;
    }

    .Villaparent {
    font-size: 20px;
    text-align: center;
    font-family: Tahoma;
    gap: 20px;
    margin-top: 40px;
    }
</style>
<div>
    @if (villa != null)
    {
        <div style="width:100%;height:500px;overflow:hidden;object-fit:cover">
            <img src="_content/BlazorWebApi.SharedComponents/Images/@villa.ImageUrl" alt="تصویر" style="width:100%" />

        </div>
        @*         <div style="width:100%;height:100px;padding:10px;gap:40px;display:flex">
            <div style="display:flex;width:400px;height:80px;margin-right:20px">
                <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto;background-color:transparent;color:black" >
                    بازگشت
                </button>
            </div>
                        <div style="display:flex;width:400px;height:80px;margin-right:20px">
                <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto" >
                    افزودن به علاقه مندی ها
                </button>
            </div>
            <div style="display:flex;width:400px;height:80px;margin-right:20px">
                <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto">
                    ویلا های مشابه
                </button>
            </div>
            <div style="display:flex;width:400px;height:80px;margin-right:20px">
                <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto">
                    باید قبل از رزرو بدانید
                </button>
            </div>
            <div style="display:flex;width:400px;height:80px;margin-right:20px">
                <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto">
                    محل روی نقشه
                </button>
            </div>
        </div> *@
        <div>

            <div style="display:flex ; margin:auto;margin-top:10px; ">
                <div style="height:960px">

                    <div style="width:450px;height:40%;padding:30px;border:1px solid rgba(0,0,0,0.3)">
                        <a href="#targetSection" style="text-decoration:none;color:rgba(0,0,0,0.8);padding:20px;margin-right:20px;display:flex">
                            <h4> معرفی</h4>
                        </a>
                        <div class="Villaparent" style=" width:100% ; display:flex">
                            <div style="width:20px;height:35px;;background-color:firebrick;border-radius:5px;">
                            </div>
                            <h3>نام ویلا:</h3>
                            <p>@villa.Name</p>

                        </div>
                        <div class="Villaparent" style=" width:100%; display:flex">
                            <div style="width:20px;height:35px;;background-color:firebrick;border-radius:5px;">
                            </div>
                            <h3>قیمت برای هر شب:</h3>
                            <p>@villa.Name</p>
                        </div>
                        <div class="Villaparent" style=" width:100%; display:flex">
                            <div style="width:20px;height:35px;;background-color:firebrick;border-radius:5px;">
                            </div>
                            <h3>نام شهر:</h3>
                            <p>@villa.Name</p>
                        </div>


                    </div>

                    <div style="width:450px;height:50%;padding:30px;border:1px solid rgba(0,0,0,0.3);margin-top:10px;">
                        <a href="#targetSection" style="text-decoration:none;color:rgba(0,0,0,0.8);padding:20px;margin-right:20px;display:flex">
                            <h4> معرفی</h4>
                        </a>
                        <div class="Villaparent" style=" width:100% ; display:flex">
                            <div style="width:20px;height:35px;;background-color:firebrick;border-radius:5px;">
                            </div>
                            <h3>نام ویلا:</h3>
                            <p>@villa.Name</p>

                        </div>
                        <div class="Villaparent" style=" width:100%; display:flex">
                            <div style="width:20px;height:35px;;background-color:firebrick;border-radius:5px;">
                            </div>
                            <h3>قیمت برای هر شب:</h3>
                            <p>@villa.Name</p>
                        </div>
                        <div class="Villaparent" style=" width:100%; display:flex">
                            <div style="width:20px;height:35px;;background-color:firebrick;border-radius:5px;">
                            </div>
                            <h3>نام شهر:</h3>
                            <p>@villa.Name</p>
                        </div>


                    </div>
                </div>


                @*                 <div class="row" style="height: 200px ; width:1000px; border:1px solid rgba(0,0,0,0.3); margin:auto; background-color:transparent">
                    <div style="height:100%;width:100%">
                    </div>
                </div> *@

                <div style="height:100%">
                    <div style="width:1500px ; height:80% ;background-color:transparent;display:flex;padding:30px; border:1px solid rgba(0,0,0,0.3);margin-right:10px">
                        <div style="width:2400px;height:700px">
                            <a href="#targetSection" style="text-decoration:none;color:rgba(0,0,0,0.8);padding:20px;margin-right:20px;display:flex">
                                <h4>اطلاعات مهم</h4>
                            </a>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>مساحت:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>تعداد اتاق:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>اتاق میهمان:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>تعداد اتاق میهمان:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>تعداد اتاق میهمان:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>مساحت:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>مساحت:</h3>
                                <p>@villa.Sqft</p>

                            </div>

                        </div>
                        <div style="width:2300px;height:700px;">
                            <a href="#targetSection" style="text-decoration:none;color:rgba(0,0,0,0.8);padding:20px;margin-right:20px;display:flex">
                                <h4>اطلاعات مهم</h4>
                            </a>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>جکوزی:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3> مساحت جکوزی:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>پارکینگ :</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>ظرفیت پارکینگ:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>ظرفیت پارکینگ:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>استخر:</h3>
                                <p>@villa.Sqft</p>

                            </div>
                            <div class="Villaparent" style=" width:50% ; display:flex">

                                <h3>ابعاد استخر:</h3>
                                <p>@villa.Sqft</p>

                            </div>

                        </div>
                    </div>


                    <div style="width:1500px;height:100px;border:1px solid rgba(0,0,0,0.3);margin-right:10px;padding:20px;margin-top:10px;display:flex">
                        <div style="display:flex;width:400px;height:80px;margin-right:20px">
                            <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto;background-color:transparent;color:black">
                                بازگشت
                            </button>
                        </div>
                        <div style="display:flex;width:400px;height:80px;margin-right:20px">
                            <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto">
                                افزودن به علاقه مندی ها
                            </button>
                        </div>
                        <div style="display:flex;width:400px;height:80px;margin-right:20px">
                            <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto">
                                ویلا های مشابه
                            </button>
                        </div>
                        <div style="display:flex;width:400px;height:80px;margin-right:20px">
                            <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto">
                                باید قبل از رزرو بدانید
                            </button>
                        </div>
                        <div style="display:flex;width:400px;height:80px;margin-right:20px">
                            <button class="btn btn-primary" style="width:100%;height:50px ;top:10px;position:relative;margin:auto">
                                محل روی نقشه
                            </button>
                        </div>
                    </div>
                </div>

            </div>
            <div>

                <div style="margin:auto;justify-content:center;justify-items:center;font-size:20px;">
                    <p>نظرات و پیشنهادات</p>
                </div>
                <div style="width:2200px;height:2px;background-color:rgba(0,0,0,0.3);margin-top:20px;right:10px; position:relative ; "></div>

                @if(comments != null){


                    @foreach (Comments item in comments)
                    {
                        <div style="width:100%;height:400px;">
                            <div>
                                <!-- دیو دوم: 8 ستون -->
                                <div style="background-color: transparent;width:63%;margin:auto;height:180px">
                                    <div style="display:flex">

                                        <div style="width:80%;height:100%">
                                            <div style="display:flex;justify-items:start;justify-content:start;margin-right:10px">
                                                <div style="font-size:14px;color:rgba(0,0,0,0.3);max-width:200px;flex-wrap:wrap;max-height:30px;background-color:transparent;height:30px;width:160px;margin-top:5px;margin-right:10px;">
                                                    <p style="margin:auto;text-align:start;font-size:16px;color:rgb(0,0,0,0.6);font-weight:500">@item.UserName امیر جزسلیمانی</p>
                                                </div>
                                                <div style="font-size:14px;color:rgba(0,0,0,0.3);max-width:200px;flex-wrap:wrap;max-height:30px;background-color:transparent;height:30px;width:60px;margin-top:5px;margin-right:10px;">
                                                    <p style="margin:auto;text-align:start;font-size:16px;color:rgb(0,0,0,0.6);font-weight:500">خریدار  </p>

                                                </div>
                                                <div style="font-size:14px;color:rgba(0,0,0,0.3);max-width:200px;flex-wrap:wrap;max-height:30px;background-color:transparent;height:30px;width:160px  ;margin-top:5px;margin-right:10px;">
                                                    <p style="margin:auto;text-align:start;font-size:16px;color:rgb(0,0,0,0.6);font-weight:500">@item.CreatedAt</p>

                                                </div>

                                            </div>

                                            <div style="display:flex">
                                                <div style="width:1200px;height:110px;margin-right:10px">
                                                    <div style="font-size:14px;color:rgba(0,0,0,0.3);max-width:1200px;flex-wrap:wrap;max-height:900px;background-color:transparent;height:65px;width:1100px;margin-top:5px;margin-right:10px;">
                                                        <p style="margin:auto;text-align:start;font-size:16px;color:rgb(0,0,0,0.6);font-weight:500">@item.Text</p>

                                                    </div>
                                                    <div style="font-size:14px;color:rgba(0,0,0,0.3);max-width:1200px;flex-wrap:wrap;max-height:900px;background-color:transparent;height:30px;width:1100px;margin-top:5px;margin-right:10px;">
                                                        <a style="font-size:20px">

                                                            <i class="fa-regular fa-star" style="color: #FFD43B;"></i>
                                                            <i class="fa-regular fa-star" style="color: #FFD43B;"></i>
                                                            <i class="fa-regular fa-star" style="color: #FFD43B;"></i>
                                                            <i class="fa-regular fa-star" style="color: #FFD43B;"></i>
                                                            <i class="fa-regular fa-star" style="color: #FFD43B;"></i>

                                                        </a>


                                                    </div>
                                                    <div style="font-size:14px;color:rgba(0,0,0,0.3);max-width:1200px;flex-wrap:wrap;max-height:900px;background-color:transparent;height:30px;width:1100px;margin-top:5px;margin-right:10px;">
                                                        <i class="fa-solid fa-synagogue"></i> @villa.Name
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <div style="width:20%;height:169px; background-color:transparent ;margin-left:10px;margin-right:10px;margin-bottom:10px;margin-top:5px">
                                            <div style="height:150px;justify-content:end;justify-items:end">
                                                <a style="left:0px;position:relative;display:flex">
                                                    <i class="fas fa-stream"></i>
                                                </a>
                                            </div>
                                            <div style="height:50px;justify-content:end;justify-items:end;text-align:end;font-size:20px;gap:50px;">
                                                <i class="fa-regular fa-thumbs-up"></i>
                                                <i class="fa-regular fa-thumbs-up fa-rotate-180"></i>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div style="width:1900px;height:2px;background-color:rgba(0,0,0,0.3);margin-top:20px;right:300px; position:relative ; "></div>

                            </div>
                        </div>
                    }
                }
            </div>
        </div>
    }

</div>

@code {
    [Parameter]
    public int? ID { get; set; }
    public Villa? villa { get; set; }
    public IEnumerable<Comments>? comments { get; set; }

    protected override async Task OnInitializedAsync()
    {
        try
        {
            villa = await _httpclient.GetFromJsonAsync<Villa>("/api/Villa/" + ID);

            Console.WriteLine(villa.ImageUrl);
            if (villa != null)
            {
                Console.WriteLine("Success");
            }
            else Console.WriteLine("Failed");
            StateHasChanged();
        }
        catch (Exception)
        {
            Console.WriteLine("Failed");
        }
        await base.OnInitializedAsync();
    }

    protected override async Task OnParametersSetAsync()
    {
        try
        {
            comments = await _httpclient.GetFromJsonAsync<IEnumerable<Comments>>("/api/Comments/forvilla/40");
            StateHasChanged();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        await base.OnParametersSetAsync();
    }
}
